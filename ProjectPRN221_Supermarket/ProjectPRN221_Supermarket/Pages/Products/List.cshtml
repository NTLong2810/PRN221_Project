@page
@model ProjectPRN221_Supermarket.Pages.Products.ListModel
@{
}
<style>
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    th {
        background-color: #f2f2f2;
        font-weight: bold;
        text-align: left;
        padding: 10px;
    }

    td {
        padding: 8px;
        border-bottom: 1px solid #ccc;
    }
    h2 {
        font-size: 24px;
        margin-bottom: 20px;
    }

    .search-container {
        display: flex;
        align-items: center;
    }

    .search-left {
        flex: 1;
    }

    .search-right {
        margin-left: auto;
    }
</style>
<div>
	<h2>List of Products</h2>
    <form method="post">
        <div class="search-container">
            <div class="search-left">
                <label for="productName">Product Name:</label>
                <input type="text" id="productName" name="productName" asp-for="productName"/>
                <button type="submit">Search</button>
            </div>
            <div class="search-right">
                <label for="categoryId">Category:</label>
                <select id="categoryId" name="categoryId" onchange="submitForm()" asp-for="categoryId">
                    <option value="">All</option>
                    @foreach (var category in Model.Categories)
                    {
                        <option value="@category.CategoryId">@category.CategoryName</option>
                    }
                </select>
            </div>
        </div>
    </form>
	<table>
		<thead>
			<tr>
				<th>Id</th>
				<th>Name</th>
				<th>Unit Price</th>
				<th>Quantity</th>
				<th>Expired Date</th>
				<th>Category</th>
                <th>Action</th>
			</tr>
		</thead>
		<tbody>
		@foreach(var product in Model.Products)
		{
			<tr>
				<td> @product.ProductId</td>
				<td> @product.ProductName</td>
				<td> @product.UnitPrice</td>
				<td> @product.QuantityInStock</td>
				<td> @product.ExpirationDate</td>
				<td> @product.Category.CategoryName</td>
                <td>
                        <a asp-page="/Products/Edit" asp-route-id="@product.ProductId">Edit</a> |
                        <a asp-page="/Products/Delete" asp-route-id="@product.ProductId">Delete</a>
                </td>
			</tr>
		}
		</tbody>
	</table>
</div>
@{
    var prevDisabled = !Model.Products.HasPreviousPage ? "disabled" : "";
    var nextDisabled = !Model.Products.HasNextPage ? "disabled" : "";
}
<a asp-page="./List"
   asp-route-pageIndex="@(Model.Products.PageIndex - 1)"
   class="btn btn-primary @prevDisabled">
    Previous
</a>
<a asp-page="./List"
   asp-route-pageIndex="@(Model.Products.PageIndex + 1)"
   class="btn btn-primary @nextDisabled">
    Next
</a>
<script>
    function submitForm() {
        document.querySelector('form').submit();
    }
</script>